<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishnaverse</title>
    <!-- D3.js Library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Google Fonts for better typography -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. GLOBAL VARIABLES & RESET --- */
        :root {
            --bg-color: #050a14; /* Dark Background */
            --text-color: #ffffff;
            --highlight: #38bdf8; /* Cyan/Blue highlight */
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-bg: rgba(255, 255, 255, 0.03); /* Very transparent */
            --backdrop-blur: blur(10px);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            scrollbar-width: thin;
            scrollbar-color: var(--highlight) transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden; /* Prevent body scroll, handle inside containers */
            width: 100vw;
            height: 100vh;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: var(--highlight); border-radius: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }

        /* --- 2. HEADER & LOGO --- */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            /* Transparent Header */
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent); 
            pointer-events: none; /* Let clicks pass through to map where empty */
        }

        .header-content {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: auto;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            text-decoration: none;
        }

        .logo-img {
            height: 45px;
            width: 45px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.5);
            background: transparent;
            padding: 2px;
            object-fit: cover;
        }

        .site-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            letter-spacing: 1px;
        }

        /* --- 3. TRANSPARENT MENU BUTTON --- */
        .menu-btn {
            background: transparent;
            border: 1px solid var(--glass-border);
            color: #fff;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: var(--backdrop-blur);
        }

        .menu-btn:hover {
            border-color: var(--highlight);
            color: var(--highlight);
            background: rgba(255,255,255,0.05);
        }

        /* --- 4. FULL SCREEN TRANSPARENT MENU --- */
        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85); /* Slightly dark to make text readable over map */
            backdrop-filter: blur(15px);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .nav-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .close-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            background: transparent;
            border: 1px solid var(--glass-border);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }

        .close-btn:hover {
            border-color: #ef4444;
            color: #ef4444;
            transform: rotate(90deg);
        }

        .nav-links {
            list-style: none;
            text-align: center;
            width: 100%;
            padding: 0;
        }

        .nav-links li {
            margin: 15px 0;
            transform: translateY(20px);
            opacity: 0;
            transition: 0.4s ease;
        }

        .nav-overlay.active .nav-links li {
            transform: translateY(0);
            opacity: 1;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: 300;
            padding: 10px 20px;
            display: inline-block;
            transition: 0.3s;
            border: 1px solid transparent;
            border-radius: 30px;
        }

        .nav-links a:hover {
            color: var(--highlight);
            border-color: var(--glass-border);
            background: rgba(255,255,255,0.05);
        }

        /* --- 5. TRANSPARENT PAGE CONTAINERS --- */
        .page-container {
            display: none;
            position: fixed;
            top: 70px; /* Below Header */
            left: 0;
            width: 100%;
            height: calc(100vh - 70px);
            overflow-y: auto;
            z-index: 500;
            padding: 20px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* The Glass Card */
        .glass-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(15px); /* Strong blur for readability */
            -webkit-backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 900px;
            margin: 0 auto 50px auto;
            text-align: center;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
         
        .glass-card a{
            display: block;
        }

        .glass-card h1 {
            color: var(--highlight);
            font-weight: 600;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .glass-card img{
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px;
        }

        .glass-card p, .glass-card li {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #e2e8f0;
            margin-bottom: 15px;
            text-align: justify;
            text-align-last: center; /* Center align last line for aesthetics */
        }

        .glass-card ul {
            list-style: none;
            padding: 0;
        }

        /* Transparent Buttons */
        .btn-transparent {
            background: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 12px 30px;
            margin-top: 20px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-transparent:hover {
            background: rgba(255,255,255,0.1);
            border-color: var(--highlight);
            color: var(--highlight);
            transform: scale(1.05);
        }

        /* --- 6. D3 VISUALIZATION STYLES --- */
        #chart-container {
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0; /* Background */
        }

        .node circle {
            fill: #000;
            stroke: var(--highlight);
            stroke-width: 1.5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .node text {
            font: 14px 'Poppins', sans-serif;
            fill: #f1f5f9;
            text-shadow: 0 2px 4px #000, 0 0 10px #000; /* High contrast text shadow */
            cursor: pointer;
            font-weight: 400;
        }

        .link {
            fill: none;
            stroke: #64748b;
            stroke-width: 1px;
            opacity: 0.5;
        }

        .node:hover circle {
            fill: #fff;
            stroke-width: 3px;
            r: 8px;
        }

        /* --- RESPONSIVE TWEAKS --- */
        @media (max-width: 768px) {
            .site-title { font-size: 1rem; }
            .glass-card { padding: 25px 15px; }
            .nav-links a { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="header-content">
            <a onclick="showHome()" class="logo-area">
                <img src="thumbnail/krishnaverse.png" alt="krishnaverse Logo" class="logo-img">
                <span class="site-title">Krishnaverse</span>
            </a>
            <button class="menu-btn" onclick="toggleMenu()">
                MENU &equiv;
            </button>
        </div>
    </header>

    <!-- Navigation Overlay -->
    <div class="nav-overlay" id="navOverlay">
        <button class="close-btn" onclick="toggleMenu()">&times;</button>
        <ul class="nav-links">
            <li style="transition-delay: 0.1s"><a onclick="showHome()">Home</a></li>
            <li style="transition-delay: 0.15s"><a onclick="showPage('tartam')">Shree Tartam Sagar</a></li>
            <li style="transition-delay: 0.2s"><a onclick="showPage('vitak')">Shree Vitak Sahib</a></li>
            <li style="transition-delay: 0.25s"><a onclick="showPage('viratpat')">Shree Viratpat Darshan</a></li>
            <li style="transition-delay: 0.3s"><a onclick="showPage('seva')">Seva Puja</a></li>
            <li style="transition-delay: 0.35s"><a onclick="showPage('nitya')">Nitya Paath</a></li>
            <li style="transition-delay: 0.4s"><a onclick="showPage('pushpanjali')">Prathana Pushpanjali</a></li>
            <li style="transition-delay: 0.45s"><a onclick="shareSite()">Share</a></li>
            <li style="transition-delay: 0.5s"><a onclick="showPage('contact')">Contact Us</a></li>
        </ul>
    </div>

    <!-- 1. BACKGROUND MAP (D3.js) -->
    <div id="chart-container"></div>

    <!-- 2. CONTENT PAGES (Hidden by default) -->

    <!-- Shree Tartam Sagar -->
    <div id="tartam" class="page-container">
        <div class="glass-card">
            <h1>Shree Tartam Sagar</h1>			
			<a href="https://drive.google.com/file/d/1lTOvktrlNJdjFNmY6WjPM6VXrO24NnVK/view?usp=sharing" target="_blank">
             <img src="thumbnail/shree tartam sagar book.png" alt="shree tartam sagar book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1lTOvktrlNJdjFNmY6WjPM6VXrO24NnVK/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Open Book</button>
              </a>			
			<p>The <strong>Shree Tartam Sagar</strong> is the central scripture of the Nijanand Sampraday. It contains the divine speech (Vani) of sadguru shree Prannathji.</p>
            <p>It provides the knowledge of the Soul (Atma) and the Supreme Lord (Paramatma).</p>
            <p>This holy book is considered the living form of the Lord in the absence of a physical Guru.</p>
			
        </div>
    </div>

    <!-- Shree Vitak Sahib -->
    <div id="vitak" class="page-container">
        <div class="glass-card">
            <h1>Shree Vitak Sahib</h1>
			<a href="https://drive.google.com/file/d/1fyTtthUQIylUHAFgsUI7gy3MHH5FJSUR/view?usp=sharing" target="_blank">
             <img src="thumbnail/shree vitak sahib book.png" alt="shreee vitak sahib book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1fyTtthUQIylUHAFgsUI7gy3MHH5FJSUR/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Open Book</button>
              </a>
            <p><strong>Shree Vitak Sahib</strong> records the history of the sect, detailing the lives and journeys of Sadguru Devchandraji and Mahamati Prannathji.</p>
            <p>It describes the awakening of the soul, the struggles faced by the Sundarsath (devotees), and the establishment of the faith across world.</p>
            <p><em>"Without knowing the history (vitak), one cannot understand the depth of the spiritual journey."</em></p>
        </div>
    </div>

    <!-- Shree Viratpat Darshan -->
    <div id="viratpat" class="page-container">
        <div class="glass-card">
            <h1>Shree Viratpat Darshan</h1>
            <img src="thumbnail/Aksharatit purnabramha.jpg" alt="Aksharatit purnabramha">
			<img src="thumbnail/akshar bramha.jpg" alt="akshar bramha">
			<img src="thumbnail/akshar bramha chatuspad.jpg" alt="akshar bramha chatuspad">
			<img src="thumbnail/keval bramha.jpg" alt="keval bramha">
			<img src="thumbnail/ksher purush.jpg" alt="ksher purush">			
            <p>The <strong>Viratpat</strong> is the cosmological map of the universe as described in the Tartam Vani.</p>
            <p>It explains the 14 Lokas of the Kshar Purush (Perishable Universe), the Akshar Brahman (Imperishable), and the ultimate abode, the Paramdham (Eternity).</p>
        </div>
    </div>

    <!-- Seva Puja -->
    <div id="seva" class="page-container">
        <div class="glass-card">
            <h1>Seva Puja</h1>
			<a href="https://drive.google.com/file/d/1i82G250VZ71dEZBWv-Ccstnu79j_EQKD/view?usp=sharing" target="_blank">
             <img src="thumbnail/seva puja book.png" alt="seva puja book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1i82G250VZ71dEZBWv-Ccstnu79j_EQKD/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Open Book</button>
              </a>
            <p>The daily routine of worship (Ashtayam Seva) reflects pure devotion and love for Shri Raj Shyamaji.</p>            
        </div>
    </div>

    <!-- Nitya Paath -->
    <div id="nitya" class="page-container">
        <div class="glass-card">
            <h1>Nitya Paath</h1>
			<a href="https://drive.google.com/file/d/1AxSK5n-WJ0erVBBpO1sC415nMLoLtgtD/view?usp=sharing" target="_blank">
             <img src="thumbnail/nitya paath book.png" alt="nitya paath book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1AxSK5n-WJ0erVBBpO1sC415nMLoLtgtD/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Open Book</button>
              </a>
            <p>Daily recitation for spiritual strength and connection.</p>
            <p>recite verses daily to keep the mind focused on the Lotus Feet of the Lord.</p>
        </div>
    </div>

    <!-- Prathana Pushpanjali -->
    <div id="pushpanjali" class="page-container">
        <div class="glass-card">
            <h1>Prathana Pushpanjali</h1>
			<a href="https://drive.google.com/file/d/1NmgCkyhpR7jWHqOeGnIn6yYnyuo2vjxi/view?usp=sharing" target="_blank">
             <img src="thumbnail/prathanapushpanjali book.png" alt="prathanapushpanjali book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1NmgCkyhpR7jWHqOeGnIn6yYnyuo2vjxi/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Open Book</button>
              </a>
            <p>Offering the flowers of our feelings to the Lord.</p>
            <p><em>"Sundarsath Ji..."</em></p>
            <p>Prayer is not just asking, but surrendering one's ego (Haume) to the will of Shri Krishna.</p>
        </div>
    </div>

    <!-- Contact Us -->
    <div id="contact" class="page-container">
        <div class="glass-card">
            <h1>Contact Us</h1>
            <p>üôè Pranam Connect with us for queries.</p>
            <div style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px;">
                <p>üìß <strong>Email:</strong> bramhaatma@gmail.com</p>
            </div>
            <button class="btn-transparent" 
onclick="window.location.href='mailto:bramhaatma@gmail.com?subject=Hello&body=Pranam sundarsath ji'">
  Send Email
</button>
        </div>
    </div>

<script>
    // --- 1. FULL D3 DATA (Nested Hierarchy) ---
    const treeData = {
        name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§æ‡§§‡•Ä‡§§ (‡§™‡•Å‡§∞‡•ç‡§£‡§¨‡•ç‡§∞‡§Æ‡•ç‡§π)",
        children: [
            {
                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§æ‡§§‡•Ä‡§§ ‡§ï‡§æ ‡§™‡§∞‡§Æ‡§ß‡§æ‡§Æ",
                children: [
                    {
                        name: "‡§¨‡§°‡§º‡•Ä ‡§∞‡§æ‡§Ç‡§ó",
                        children: [
                            {
                                name: "‡§∏‡§æ‡§ó‡§∞ ‡§Æ‡§Ç‡§°‡§≤",
                                children: [
                                    { name: "‡§¶‡§ß‡§ø ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§ò‡•É‡§§ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§∞‡§∏ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§Æ‡§ß‡•Å ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§∏‡§∞‡•ç‡§µ‡§∞‡§∏ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§®‡•Ç‡§∞ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§®‡•Ä‡§∞ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§ï‡•ç‡§∑‡•Ä‡§∞ ‡§∏‡§æ‡§ó‡§∞" }
                                ]
                            },
                            {
                                name: "‡§ö‡§æ‡§Å‡§¶‡§®‡•Ä ‡§ö‡•å‡§ï",
                                children: [
                                    { name: "‡§Ø‡§Æ‡•Å‡§®‡§æ‡§ú‡•Ä" },
                                    { name: "‡§Ö‡§Æ‡•É‡§§ ‡§µ‡§®" },
                                    { name: "‡§™‡§æ‡§ü ‡§ò‡§æ‡§ü" },
                                    { name: "‡§¨‡§ü ‡§µ‡§®" },
                                    { name: "‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä ‡§µ‡§®" },
                                    { name: "‡§ú‡§Æ‡•ç‡§¨‡•Å ‡§µ‡§®" },
                                    { name: "‡§Ö‡§®‡§æ‡§∞ ‡§µ‡§®" },
                                    { name: "‡§≤‡§ø‡§¨‡•ã‡§à ‡§µ‡§®" },
                                    { name: "‡§ï‡•á‡§≤ ‡§µ‡§®" },
                                    { name: "‡§∞‡§Ç‡§ó ‡§Æ‡§π‡§≤" },
                                    { name: "‡§¨‡§ü ‡§™‡•Ä‡§™‡§≤ ‡§ö‡•å‡§ï‡•Ä" },
                                    { name: "‡§ñ‡§°‡•ã‡§ï‡§≤‡•Ä ‡§≤‡§æ‡§≤ ‡§ö‡§¨‡•Ç‡§§‡§∞‡§æ" },
                                    { name: "‡§§‡§æ‡§°‡§º ‡§µ‡§®" },
                                    { name: "‡§¨‡§°‡•ã ‡§µ‡§®" },
                                    { name: "‡§Æ‡§ß‡•Å ‡§µ‡§®" },
                                    { name: "‡§Æ‡§π‡§æ ‡§µ‡§®" },
                                    { name: "‡§â‡§§‡§∞ ‡§ò‡§æ‡§ü‡•Ä ‡§µ‡§®" },
                                    { name: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú‡§ó‡§ø‡§∞‡•Ä ‡§Æ‡§π‡§≤" },
                                    { name: "‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ ‡§ò‡§æ‡§ü‡•Ä ‡§µ‡§®" },
                                    { name: "‡§ö‡•ã‡§ó‡§æ‡§®" },
                                    { name: "‡§Ö‡§®‡•ç‡§® ‡§ß‡§®" },
                                    { name: "‡§¶‡•Ç‡§ß ‡§¶‡§≤‡•Ä‡§ö‡§æ" },
                                    { name: "‡§´‡•Å‡§≤ ‡§¨‡§æ‡§ó" },
                                    { name: "‡§®‡•Ç‡§∞ ‡§¨‡§æ‡§ó" },
                                    { name: "‡§π‡•ã‡§ú‡§ï‡•ã‡§∂‡§∞ ‡§§‡§æ‡§≤ (‡§∏‡•Å‡§ß‡§æ‡§∏‡§∞)" },
                                    { name: "‡§Æ‡§æ‡§£‡§ø‡§ï ‡§Æ‡§π‡§≤" }
                                ]
                            },
                            {
                                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ß‡§æ‡§Æ",
                                children: [
                                    { name: "‡§ï‡•Å‡§Ç‡§ú ‡§®‡§ø‡§ï‡•Å‡§Ç‡§ú" },
                                    { name: "‡§¨‡§ü ‡§µ‡§®" },
                                    { name: "‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä ‡§µ‡§®" },
                                    { name: "‡§ú‡§Æ‡•ç‡§¨‡•Å ‡§µ‡§®" },
                                    { name: "‡§Ö‡§®‡§æ‡§∞ ‡§µ‡§®" },
                                    { name: "‡§≤‡§ø‡§¨‡•ã‡§à ‡§µ‡§®" },
                                    { name: "‡§ï‡•á‡§≤ ‡§µ‡§®" },
                                    { name: "‡§Ö‡§Æ‡•É‡§§" }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ (‡§∏‡§§‡•ç‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™)",
                children: [
                    {
                        name: "‡§Æ‡§π‡§æ‡§ï‡§æ‡§∞‡§£",
                        children: [
                            {
                                name: "‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ ‡§®‡§ó‡•ç‡§® ‡§∏‡§§‡•ç‡§Ø (‡§Ö‡§µ‡•ç‡§Ø‡§æ‡§ï‡•É‡§§)",
                                children: [
                                    { name: "‡§ú‡•ã‡§∂ ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™" },
                                    { name: "‡§¨‡•Å‡§¶‡•ç‡§ß ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™" }
                                ]
                            }
                        ]
                    },
                    { name: "‡§∏‡§§‡•ç‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™" },
                    { name: "‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§®‡•Ä" }
                ]
            },
            {
                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ (‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø‚Äì‡§™‡•Å‡§∞‡•Å‡§∑)",
                children: [
                    { name: "‡§ó‡•ã‡§≤‡•ã‡§ï ‡§ß‡§æ‡§Æ" },
                    {
                        name: "‡§®‡§ø‡§§‡•ç‡§Ø ‡§¨‡•à‡§ï‡•Å‡§Ç‡§†",
                        children: [
                            { name: "‡§∏‡§§‡•ç‡§Ø ‡§≤‡•ã‡§ï" },
                            { name: "‡§µ‡§ø‡§∑‡•ç‡§£‡•Å ‡§≤‡•ã‡§ï" },
                            { name: "‡§™‡•Å‡§∑‡•ç‡§ï‡§∞ ‡§¶‡•ç‡§µ‡•Ä‡§™" },
                            { name: "‡§∂‡•ç‡§µ‡•á‡§§ ‡§¶‡•ç‡§µ‡•Ä‡§™" }
                        ]
                    },
                    { name: "‡§Ü‡§µ‡§∞‡§£ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                    { name: "‡§µ‡§ø‡§ï‡•ç‡§∑‡•á‡§™ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                    {
                        name: "‡§∏‡•Å‡§Æ‡§Ç‡§ó‡§≤‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø (‡§ö‡§ø‡§¶‡§æ‡§®‡§Ç‡§¶ ‡§≤‡§π‡§∞‡•Ä)",
                        children: [
                            { name: "‡§Æ‡§π‡§æ‡§µ‡§ø‡§∑‡•ç‡§£‡•Å" },
                            { name: "‡§∂‡§ø‡§µ" },
                            { name: "‡§∏‡§®‡§ï‡§æ‡§¶‡§ø‡§ï" },
                            { name: "‡§∏‡•Å‡§ï‡§¶‡•á‡§µ" },
                            { name: "‡§ï‡§¨‡•Ä‡§∞" }
                        ]
                    }
                ]
            },
            {
                name: "‡§Ö‡§µ‡•ç‡§Ø‡§æ‡§ï‡•É‡§§ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                children: [
                    {
                        name: "‡§ï‡§æ‡§∞‡§£",
                        children: [
                            { name: "‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§Ö‡§®‡§ø‡§∞‡•ç‡§µ‡§ö‡§®‡•Ä‡§Ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§â‡§®‡§Æ‡•Å‡§®‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§á‡§ö‡•ç‡§õ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§§‡•É‡§ö‡•ç‡§õ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§∂‡§ø‡§µ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§∏‡§æ‡§§ ‡§∂‡•Ç‡§®‡•ç‡§Ø" },
                            { name: "‡§∏‡§æ‡§§ ‡§∞‡§Ç‡§ó" }
                        ]
                    },
                    {
                        name: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ",
                        children: [
                            { name: "‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ" },
                            { name: "‡§Ö‡§ß‡§ø‡§¶‡•à‡§µ" },
                            { name: "‡§Ö‡§ß‡§ø‡§≠‡•Ç‡§§" }
                        ]
                    },
                    {
                        name: "‡§∏‡•ç‡§•‡•Ç‡§≤",
                        children: [
                            {
                                name: "‡§™‡§∞‡§™‡•ç‡§∞‡§£‡§µ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                                children: [
                                    { name: "‡§ú‡•ç‡§û‡§æ‡§® ‡§∂‡§ï‡•ç‡§§‡§ø ‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä" },
                                    { name: "‡§™‡§æ‡§Å‡§ö ‡§µ‡•á‡§¶" }
                                ]
                            },
                            {
                                name: "‡§Ö‡§™‡§∞ ‡§™‡§∞‡§™‡•ç‡§∞‡§£‡§µ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                                children: [
                                    { name: "‡•ê" }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                name: "‡§ï‡•á‡§µ‡§≤ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                children: [
                    { name: "‡§ï‡•á‡§µ‡§≤ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ" },
                    { name: "‡§Ü‡§®‡§Ç‡§¶ ‡§Ø‡•ã‡§ó‡§Æ‡§æ‡§Ø‡§æ" },
                    { name: "‡§π‡§ø‡§Ç‡§°‡•ã‡§≤‡§æ ‡§Ø‡•ã‡§ó‡§Æ‡§æ‡§Ø‡§æ ‡§Æ‡§Ç‡§°‡§≤" }
                ]
            },
            {
                name: "‡§∏‡§¨‡§≤‡•Ä‡§ï ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                children: [
                    { name: "‡§∏‡§¨‡§≤‡•Ä‡§ï ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ ‡§ï‡§æ ‡§Æ‡§π‡§æ‡§ï‡§æ‡§∞‡§£" },
                    { name: "‡§Ö‡§ñ‡§Ç‡§° ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∏" },
                    { name: "‡§®‡§ø‡§§‡•ç‡§Ø ‡§ó‡•ã‡§≤‡•ã‡§ï" }
                ]
            },
            {
                name: "‡§ï‡•ç‡§∑‡§∞ ‡§™‡•Å‡§∞‡•Å‡§∑",
                children: [
                    {
                        name: "‡§Æ‡•ã‡§π ‡§ú‡§≤",
                        children: [
                            {
                                name: "‡§Ü‡§¶‡§ø ‡§®‡§æ‡§∞‡§æ‡§Ø‡§£ (‡§ö‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡•Ç‡§π)",
                                children: [
                                    { name: "‡§µ‡§æ‡§∏‡•Å‡§¶‡•á‡§µ" },
                                    { name: "‡§∏‡§Ç‡§ï‡§∞‡•ç‡§∑‡§£" },
                                    { name: "‡§™‡•ç‡§∞‡§¶‡•ç‡§Ø‡•Å‡§Æ‡•ç‡§®" },
                                    { name: "‡§Ö‡§®‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß" }
                                ]
                            },
                            {
                                name: "‡§Æ‡§π‡§æ‡§µ‡§ø‡§∑‡•ç‡§£‡•Å",
                                children: [
                                    {
                                        name: "‡§ï‡§æ‡§∞‡§£ ‡§∂‡§∞‡•Ä‡§∞",
                                        children: [
                                            { name: "‡§â‡§®‡§Æ‡•Å‡§®‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§Ö‡§®‡§ø‡§∞‡•ç‡§µ‡§ö‡§®‡•Ä‡§Ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§§‡•É‡§ö‡•ç‡§õ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§∂‡§ø‡§µ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§∏‡§æ‡§§ ‡§∂‡•Ç‡§®‡•ç‡§Ø" }
                                        ]
                                    },
                                    {
                                        name: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§∂‡§∞‡•Ä‡§∞",
                                        children: [
                                            { name: "‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§Æ‡§π‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§∏‡•Å‡§Æ‡§®‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" }
                                        ]
                                    },
                                    {
                                        name: "‡§∏‡•ç‡§•‡•Ç‡§≤ ‡§∂‡§∞‡•Ä‡§∞",
                                        children: [
                                            { name: "‡§ú‡•ç‡§û‡§æ‡§® ‡§∂‡§ï‡•ç‡§§‡§ø ‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä" },
                                            { name: "‡§ö‡§æ‡§∞ ‡§µ‡•á‡§¶" }
                                        ]
                                    }
                                ]
                            },
                            {
                                name: "‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™ (‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä)",
                                children: [
                                    { name: "‡§ö‡§Æ‡•ã‡§ö‡§ï ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§á‡§ß‡•Ä‡§¶‡•ç‡§µ‡•Ä‡§™‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§™‡§∞‡§Æ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§â‡§ß‡•ç‡§¶‡•ç‡§∞‡§ó‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" }
                                ]
                            },
                            {
                                name: "‡§Ö‡§∑‡•ç‡§ü ‡§Ü‡§µ‡§∞‡§£ (‡§®‡§ø‡§§‡•ç‡§Ø ‡§™‡•ç‡§∞‡§≤‡§Ø)",
                                children: [
                                    {
                                        name: "‡§™‡§Ç‡§ö‡§Æ‡§π‡§æ‡§≠‡•Ç‡§§",
                                        children: [
                                            { name: "‡§™‡•É‡§•‡•ç‡§µ‡•Ä" },
                                            { name: "‡§ú‡§≤" },
                                            { name: "‡§Ö‡§ó‡•ç‡§®‡§ø" },
                                            { name: "‡§µ‡§æ‡§Ø‡•Å" },
                                            { name: "‡§Ü‡§ï‡§æ‡§∂" }
                                        ]
                                    },
                                    {
                                        name: "‡§Ö‡§Ç‡§§‡§É‡§ï‡§∞‡§£",
                                        children: [
                                            { name: "‡§Æ‡§®" },
                                            { name: "‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø" },
                                            { name: "‡§Ö‡§π‡§Ç‡§ï‡§æ‡§∞" }
                                        ]
                                    }
                                ]
                            },
                            {
                                name: "‡§≤‡•ã‡§ï (‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°)",
                                children: [
                                    { name: "‡§∏‡§§‡•ç‡§Ø‡§≤‡•ã‡§ï" },
                                    { name: "‡§§‡§™‡§≤‡•ã‡§ï" },
                                    { name: "‡§ú‡§®‡§≤‡•ã‡§ï" },
                                    { name: "‡§Æ‡§π‡§∞‡§≤‡•ã‡§ï" },
                                    { name: "‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó‡§≤‡•ã‡§ï" },
                                    { name: "‡§≠‡•Å‡§µ‡§∞‡•ç‡§≤‡•ã‡§ï" },
                                    { name: "‡§≠‡•Ç‡§≤‡•ã‡§ï (‡§™‡•É‡§•‡•ç‡§µ‡•Ä)" },
                                    { name: "‡§Ö‡§§‡§≤" },
                                    { name: "‡§µ‡§ø‡§§‡§≤" },
                                    { name: "‡§∏‡•Å‡§§‡§≤" },
                                    { name: "‡§§‡§≤‡§æ‡§§‡§≤" },
                                    { name: "‡§Æ‡§π‡§æ‡§§‡§≤" },
                                    { name: "‡§∞‡§∏‡§æ‡§§‡§≤" },
                                    { name: "‡§™‡§æ‡§§‡§æ‡§≤" },
                                    { name: "‡§∂‡•á‡§∑‡§∂‡§æ‡§Ø‡•Ä ‡§®‡§æ‡§∞‡§æ‡§Ø‡§£" }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    };

    // --- 2. NAVIGATION LOGIC ---

    function toggleMenu() {
        const overlay = document.getElementById('navOverlay');
        overlay.classList.toggle('active');
    }

    function showHome() {
        // 1. Close Menu
        document.getElementById('navOverlay').classList.remove('active');
        
        // 2. Hide all page containers
        const pages = document.querySelectorAll('.page-container');
        pages.forEach(p => p.style.display = 'none');

        // 3. Show D3 Chart
        const chart = document.getElementById('chart-container');
        chart.style.opacity = '1';

        // 4. Reset Zoom (Center the map again)
        resetZoom();
    }

    function showPage(pageId) {
        // 1. Close Menu
        document.getElementById('navOverlay').classList.remove('active');

        // 2. Hide all other pages
        document.querySelectorAll('.page-container').forEach(el => {
            el.style.display = 'none';
        });

        // 3. Show Target Page
        const target = document.getElementById(pageId);
        if (target) {
            target.style.display = 'block';
            target.scrollTop = 0; // Scroll to top
        }
    }

    function shareSite() {
        if (navigator.share) {
            navigator.share({
                title: 'Krishna Pranami',
                text: 'Discover the Cosmology of Nijanand Sampraday',
                url: window.location.href
            }).catch(console.error);
        } else {
            alert("Link copied to clipboard!");
        }
        toggleMenu();
    }

     

     // --- 3. D3 VIZ SETUP ---

const width = window.innerWidth;
const height = window.innerHeight;

const svg = d3.select("#chart-container").append("svg")
    .attr("width", "100%")
    .attr("height", "100vh");

const g = svg.append("g");

// Zoom setup
const zoom = d3.zoom()
    .scaleExtent([0.1, 4])
    .on("zoom", (event) => {
        g.attr("transform", event.transform);
    });

svg.call(zoom);
svg.on("dblclick.zoom", null);

// Tree Layout
const tree = d3.tree().nodeSize([35, 260]);

// ---------------- ROOT ----------------
const root = d3.hierarchy(treeData, d => d.children);
root.x0 = height / 2;
root.y0 = 0;

// ‚úÖ ROOT COLLAPSE (‡§Ø‡§π‡•Ä‡§Ç ‡§Ö‡§∏‡§≤‡•Ä ‡§ï‡§æ‡§Æ ‡§π‡•à)
function collapseRoot(d) {
    if (d.children) {
        d._children = d.children;
        d.children = null;
    }
}
collapseRoot(root);

// ‡§™‡§π‡§≤‡•Ä render call
update(root);

// --- ZOOM & CENTER LOGIC ---
function resetZoom() {
    const isMobile = window.innerWidth < 768;
    const scale = isMobile ? 0.45 : 0.75;
    const xOffset = isMobile ? 40 : 150;

    const t = d3.zoomIdentity
        .translate(xOffset, height / 2)
        .scale(scale);

    svg.transition().duration(1000).call(zoom.transform, t);
}

resetZoom();

function update(source) {

    const treeData = tree(root);
    const nodes = treeData.descendants();
    const links = treeData.links();

    nodes.forEach(d => d.y = d.depth * 280);

    // --- Nodes ---
    const node = g.selectAll("g.node")
        .data(nodes, d => d.id || (d.id = Math.random()));

    const nodeEnter = node.enter()
        .append("g")
        .attr("class", "node")
        .attr("transform", `translate(${source.y0},${source.x0})`)
        .on("click", click);

    nodeEnter.append("circle")
        .attr("r", 1e-6)
        .style("fill", d => d._children ? "#38bdf8" : "#050a14");

    nodeEnter.append("text")
        .attr("dy", ".35em")
        .attr("x", d => d.children || d._children ? -15 : 15)
        .attr("text-anchor", d => d.children || d._children ? "end" : "start")
        .text(d => d.data.name)
        .style("fill-opacity", 1e-6);

    const nodeUpdate = nodeEnter.merge(node);

    nodeUpdate.transition()
        .duration(500)
        .attr("transform", d => `translate(${d.y},${d.x})`);

    nodeUpdate.select("circle")
        .attr("r", 6)
        .style("fill", d => d._children ? "#38bdf8" : "#050a14");

    nodeUpdate.select("text")
        .style("fill-opacity", 1);

    // --- Links ---
    const link = g.selectAll("path.link")
        .data(links, d => d.target.id);

    const linkEnter = link.enter()
        .insert("path", "g")
        .attr("class", "link")
        .attr("d", d => {
            const o = { x: source.x0, y: source.y0 };
            return diagonal(o, o);
        });

    linkEnter.merge(link)
        .transition()
        .duration(500)
        .attr("d", d => diagonal(d.source, d.target));

    node.exit().transition()
        .duration(500)
        .remove();

    link.exit().transition()
        .duration(500)
        .remove();

    nodes.forEach(d => {
        d.x0 = d.x;
        d.y0 = d.y;
    });

    function diagonal(s, d) {
        return `
            M ${s.y} ${s.x}
            C ${(s.y + d.y) / 2} ${s.x},
              ${(s.y + d.y) / 2} ${d.x},
              ${d.y} ${d.x}
        `;
    }

    function click(event, d) {
        if (d.children) {
            d._children = d.children;
            d.children = null;
        } else {
            d.children = d._children;
            d._children = null;
        }
        update(d);
    }
}

// Resize
window.addEventListener("resize", () => {
    svg.attr("width", window.innerWidth)
       .attr("height", window.innerHeight);
});

</script>
</body>
</html>
