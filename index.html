<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishnaverse</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #0b0d10;
            --text-color: #ffffff;
            --highlight: #38bdf8;
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-bg: rgba(255, 255, 255, 0.03);
            --backdrop-blur: blur(10px);
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', system-ui, sans-serif; }
        body { background-color: var(--bg-color); color: rgba(255,255,255,0.85); overflow: hidden; width: 100vw; height: 100vh; }

        /* HEADER */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent); 
            pointer-events: none;
        }
        /* Header content */
.header-content {
    width: 100%;                    
    display: flex;
    align-items: center;
    justify-content: space-between;
    pointer-events: auto;
}

/* Logo + text */
.logo-area {
    display: flex;
    flex-direction: row !important; /* üî• force row */
    align-items: center;
    gap: 10px;
    height: 70px;
    text-decoration: none;
}

/* Logo image */
.logo-img {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255,255,255,0.6);
    flex-shrink: 0;
}

/* Title + slogan wrapper */
.site-title-wrap {
    display: flex;
    flex-direction: column;   /* only here */
    justify-content: center;
}

/* Title */
.site-title {
    font-size: 1.15rem;
    font-weight: 600;
    color: #ffffff;
    line-height: 1;
}

/* Slogan */
.site-slogan {
    font-size: 0.55rem;
    letter-spacing: 2.5px;
    color: rgba(255,255,255,0.65);
    margin-top: 2px;
    text-transform: uppercase;
    line-height: 1;
}

.menu-btn {
    margin-left: auto;
}

        .menu-btn {
            background: transparent; border: 1px solid var(--glass-border);
            color: #fff; padding: 10px 15px; border-radius: 8px; cursor: pointer; backdrop-filter: var(--backdrop-blur);
        }

        /* FLOATING UI */
#control-tip {
    position: fixed;
    top: 85px;
    left: 50%;
    transform: translateX(-50%);
    border: 2px solid #ffffff;
    color: #ffffff;
    padding: 10px 30px;
    border-radius: 50px;
    background: #0b0d10;
    font-size: 0.9rem;
    z-index: 900;
    pointer-events: none;
    white-space: nowrap;
}

#latest-bar {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 400px;
    background: #0b0d10;
    border: 1px solid #ffffff;
    backdrop-filter: blur(10px);
    padding: 12px;
    border-radius: 15px;
    text-align: center;
    cursor: pointer;
    z-index: 900;
    color: #ffffff;
    font-weight: 600;
    text-transform: uppercase;
}

        /* NAVIGATION OVERLAY */
        .nav-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(15px);
            z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center;
        }
        .nav-overlay.active { display: flex; }
        .nav-links { list-style: none; text-align: center; }
        .nav-links li { margin: 15px 0; }
        .nav-links a { color: #fff; text-decoration: none; font-size: 1.5rem; cursor: pointer; transition: 0.3s; }
        .nav-links a:hover { color: var(--highlight); }

        /* PAGE CONTAINERS */
        .page-container {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            overflow-y: auto; z-index: 1500; padding: 100px 20px 50px;
            background: rgba(5, 10, 20, 0.8); backdrop-filter: blur(15px);
        }
        .glass-card {
            background: var(--glass-bg); border: 1px solid var(--glass-border);
            border-radius: 20px; padding: 40px 30px; max-width: 900px; margin: 0 auto; text-align: center;
        }

       .glass-card img { width: 100%; max-width: 300px; border-radius: 10px; margin: 20px 0; }
        
.glass-card h1 {
  font-size: 32px;
  font-weight: 600;
  letter-spacing: 0.4px;
  color: var(--highlight);
  margin-bottom: 24px;
}
.glass-card p {
  font-size: 15px;
  line-height: 1.65;
  max-width: 560px;
  margin: 0 auto 16px;
  color: rgba(226,232,240,0.9);
}
        
.btn-transparent {
            background: transparent; border: 1px solid #fff; color: #fff;
            padding: 12px 30px; border-radius: 50px; cursor: pointer; margin-top: 10px;
        }

        h1.latestt {
    font-size: 20px;         
    font-weight: 600;        
    line-height: 1.4;         
    color: var(--highlight);
        } 
        
h1.disclaimer {
    font-size: 10px;         
    font-weight: 600;        
    line-height: 1.4;         
    color: #0c0c0c;              
    
    margin: 20px 0;          
    padding: 10px 15px;      
    
    text-align: center;     
    letter-spacing: 0.5px;   
    
    background: #d48e8e;    
    border-left: 4px solid #ff9800; 
    
    border-radius: 6px;
}

        .post-box {
    padding: 30px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.15);
    text-align: center;
}

.post-box:last-child {
    border-bottom: none;
}

.post-box h2 {
  font-size: 17px;
  font-weight: 600;
  letter-spacing: 0.6px;
  margin-bottom: 14px;
  color: #f1f5f9;
}

.post-box img {
    width: 100%;
    max-width: 340px;
    border-radius: 14px;
    margin: 0 auto;
    display: block;
}

        /* D3 CHART */
        #chart-container { width: 100%; height: 100vh; position: absolute; top: 0; left: 0; z-index: 0; }
        .node circle { fill: #000; stroke: var(--highlight); stroke-width: 1.5px; cursor: pointer; }
        .node text { font: 14px 'Poppins', sans-serif; fill: #f1f5f9; text-shadow: 0 0 8px #000; cursor: pointer; }
        .link { fill: none; stroke: #ffffff; stroke-width: 1px; opacity: 0.6; }
    </style>
</head>
<body>

    <header>
    <div class="header-content">

        <a onclick="showHome()" class="logo-area">
            <img src="thumbnail/Krishnaverse.jpg" alt="Logo" class="logo-img"><div class="site-title-wrap">
                <span class="site-title">Krishnaverse</span>
                <span class="site-slogan">Vedic Research</span>
            </div>
        </a>

           <button class="menu-btn" onclick="toggleMenu()">MENU‚ò∞</button> 

    </div>
</header>

    <div id="control-tip">Click on "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§æ‡§§‡•Ä‡§§ (‡§™‡•Å‡§∞‡•ç‡§£‡§¨‡•ç‡§∞‡§Æ‡•ç‡§π)" to begin exploration</div>
    <div id="latest-bar" onclick="showPage('latest')">‚ú® View Latest News ‚ú®</div>

    <!-- Navigation Overlay -->
    <div class="nav-overlay" id="navOverlay">
        <button onclick="toggleMenu()" style="position:absolute; top:25px; right:25px; background:none; border:none; color:#fff; font-size:2rem; cursor:pointer;">&times;</button>
        <ul class="nav-links">
            <li><a onclick="showHome()">Home</a></li>
            <li><a onclick="showPage('tartam')">Shree Tartam Sagar</a></li>
            <li><a onclick="showPage('vitak')">Shree Vitak Sahib</a></li>
            <li><a onclick="showPage('viratpat')">Shree Viratpat Darshan</a></li>
            <li><a onclick="showPage('seva')">Seva Puja</a></li>
            <li><a onclick="showPage('nitya')">Nitya Paath</a></li>
            <li><a onclick="showPage('pushpanjali')">Prathana Pushpanjali</a></li>
            <li><a onclick="showPage('latest')">Latest Updates</a></li>
			<li style="transition-delay: 0.45s"><a onclick="shareSite()">Share</a></li>
            <li><a onclick="showPage('contact')">Contact Us</a></li>
        </ul>
    </div>

    <div id="chart-container"></div>
	
    
			
<div id="latest" class="page-container">
    <div class="glass-card">

<h1 class="latestt">All of these are inside (‡§ï‡•ç‡§∑‡§∞ ‡§™‡•Å‡§∞‡•Å‡§∑)</h1>
<h1 class="disclaimer">The purpose of Krishnaverse is not to change, prove, or disprove any scientific theory, but rather to arouse curiosity and inspire independent research.
The reader/viewer is expected to conduct further research on their own, based on authentic sources, scientific research, and logic.</h1>

        <!-- POSTS START -->
        <div class="post-box">
            <h2>Open string</h2>
            <img src="thumbnail/Open string.gif" alt="Open string">
            <p>open string has two free ends. Its vibrations represent matter particles and force carriers like electromagnetic and nuclear forces.</p>
        </div>

        <div class="post-box">
            <h2>Closed string</h2>
            <img src="thumbnail/Closed string.gif" alt="Closed string">
            <p>closed string is a loop with no ends. Its vibrations include the graviton, the particle associated with gravity.</p>
        </div>

        <div class="post-box">
            <h2>Super strings</h2>
            <img src="thumbnail/Super strings.gif" alt="Super strings">
            <p>Superstring theory extends string theory by including supersymmetry, aiming to unify all fundamental forces and particles.</p>
        </div>

        <div class="post-box">
            <h2>Quarks</h2>
            <img src="thumbnail/Quarks.gif" alt="Quarks">
            <p>quarks are fundamental particles that make up protons and neutrons, 
            which are the building blocks of atoms. They are held together by the strong force,
            carried by particles called gluons. Quarks come in six types, known as flavors,
            and they are never found alone in nature.</p>
</p>
        </div>

        <div class="post-box">
            <h2>Muon</h2>
            <img src="thumbnail/Muon.jpg" alt="Muon">
            <p>muon is a fundamental subatomic particle similar to the electron but much heavier.
           It carries a negative electric charge and is unstable, decaying into other particles after a very short time.</p>
        </div>

        <div class="post-box">
            <h2>Tau</h2>
            <img src="thumbnail/Tau.png" alt="Tau">
            <p>tau is a fundamental subatomic particle similar to the electron but much heavier.
            It carries a negative electric charge and is very unstable, decaying rapidly into lighter particles.</p>
        </div>

        <div class="post-box">
            <h2>Photon</h2>
            <img src="thumbnail/Photon.gif" alt="Photon">
            <p>photon is a fundamental particle of light and all electromagnetic radiation.
            It has no mass, carries energy, and is the force carrier of the electromagnetic force.</p>
        </div>

        <div class="post-box">
            <h2>Gluon</h2>
            <img src="thumbnail/Gluon.jpg" alt="Gluon">
            <p>gluon is a fundamental particle that carries the strong nuclear force.
            It binds quarks together inside protons and neutrons, holding atomic nuclei together.</p>
        </div>

        <div class="post-box">
            <h2>Boson</h2>
            <img src="thumbnail/higss-diagram.avif" alt="higss diagram">
            <p>boson is a type of fundamental particle that carries forces between other particles. Unlike fermions,
            multiple bosons can occupy the same quantum state. Examples include the photon (electromagnetic force),
            gluon (strong force), W and Z bosons (weak force), and the Higgs boson (gives mass to particles).</p>
        </div>

        <div class="post-box">
            <h2>Higgs Boson</h2>
            <img src="thumbnail/Higgs Boson.jpeg" alt="Higgs Boson">
            <p>Higgs boson is a fundamental particle associated with the Higgs field, which gives mass to other elementary particles. 
            It was discovered in 2012 at the Large Hadron Collider and is a key part of the Standard Model of particle physics.</p>
        </div>

        <div class="post-box">
            <h2>Graviton</h2>
            <img src="thumbnail/Graviton.gif" alt="Graviton">
            <p>graviton is a hypothetical elementary particle that is believed to mediate the force of gravity in quantum theories. Unlike other force-carrying particles,
            it has not yet been experimentally observed, but it is predicted to be massless and travel at the speed of light.</p>
        </div>

        <!-- Composite particles -->
        <div class="post-box">
            <h2>Hadron</h2>
            <img src="thumbnail/Hadron.jpg" alt="Hadron">
            <p>hadron is a composite particle made of quarks held together by the strong force. Protons and neutrons are the most common hadrons.
            Hadrons are classified into baryons (three quarks) and mesons (a quark and an antiquark).</p>
        </div>

        <div class="post-box">
            <h2>Neutron electron and proton</h2>
            <img src="thumbnail/Neutron electron and proton.jpeg" alt="Neutron electron and proton">
            <p>proton is a positively charged subatomic particle found in the nucleus of an atom.
            It is made of two up quarks and one down quark.
            A neutron is a neutral subatomic particle found in the nucleus. It is made of one up quark and two down quarks.
        An electron is a negatively charged fundamental particle that orbits the nucleus of an atom. It has very little mass compared to protons and neutrons.</p>
        </div>

        <!-- Atomic level -->
        <div class="post-box">
            <h2>Atom</h2>
            <img src="thumbnail/Atom.gif" alt="Atom">
            <p>atom is the smallest unit of matter that retains the properties of an element. 
            It consists of a nucleus (containing protons and neutrons) surrounded by electrons orbiting in energy levels.
            Atoms combine to form molecules, which make up all substances in the universe.</p>
        </div>

        <!-- Molecular / matter scale -->
        <div class="post-box">
            <h2>Molecule</h2>
            <img src="thumbnail/Molecule.gif" alt="Molecule">
            <p>molecule is a group of two or more atoms bonded together,
            representing the smallest unit of a chemical compound that retains its chemical properties.
            Molecules can be simple, like O‚ÇÇ, or complex, like DNA.</p>
        </div>

        <div class="post-box">
            <h2>Condensed Matter (Solid / Liquid / Gas / Plasma)</h2>
            <img src="thumbnail/Condensed Matter.jpg" alt="Condensed Matter">
            <p>Condensed matter refers to solids and liquids whose atoms or molecules are closely packed together. This field of physics studies their structure, 
            properties, and behaviors, including phenomena like crystals, superconductivity, and magnetism.</p>
        </div>

        <!-- Astronomical objects -->
        <div class="post-box">
            <h2>Asteroid</h2>
            <img src="thumbnail/Asteroid.gif" alt="Asteroid">
            <p>asteroid is a small, rocky object floating in space. 
            It is irregular in shape and much smaller than a planet. 
            Asteroids are leftover material from the early formation of the solar system.</p>
        </div>

        <div class="post-box">
            <h2>Comet</h2>
            <img src="thumbnail/Comet.gif" alt="Comet">
            <p>comet is a small icy body in space that, when near a star, 
            develops a glowing coma (a cloud of gas and dust) and often a visible tail. 
            Comets are made of ice, dust, and rocky material</p>
        </div>

        <div class="post-box">
            <h2>Planet</h2>
            <img src="thumbnail/Planet.jpg" alt="Planet">
            <p>planet is a large celestial body that orbits a star. 
            It is massive enough for its gravity to make it nearly round and has cleared its orbit of other debris. Planets can be rocky</p>
        </div>

        <!-- Stellar objects -->
        <div class="post-box">
            <h2>Star</h2>
            <img src="thumbnail/Star.gif" alt="Star">
            <p>star is a massive, luminous sphere of hot gas, 
            primarily hydrogen and helium,
            that produces energy through nuclear fusion.
            Stars emit light and heat, and they are the building blocks of galaxies.</p>
        </div>

        <div class="post-box">
            <h2>White Dwarf</h2>
            <img src="thumbnail/White Dwarf.jpg" alt="White Dwarf">
            <p>white dwarf is a small, dense remnant of a star that has exhausted its nuclear fuel. 
            It no longer undergoes fusion and slowly cools over time. Despite its small size,
            it can have a mass similar to the Sun.</p>
        </div>

        <div class="post-box">
            <h2>Neutron Star</h2>
            <img src="thumbnail/Neutron Star.webp" alt="Neutron Star">
            <p>neutron star is an extremely dense remnant of a massive star that has exploded as a supernova.
            It is mostly made of neutrons, has a very small radius (about 10,20 km), but can have more mass than the Sun.
            Neutron stars have intense gravity and often spin rapidly, sometimes emitting beams of radiation called pulsars.</p>
        </div>

        <div class="post-box">
            <h2>Black Hole</h2>
            <img src="thumbnail/Black Hole.gif" alt="Black Hole">
            <p>black hole is an object with gravity so strong that nothing, not even light, 
            can escape from it. It forms when a massive star collapses.</p>
        </div>

        <!-- Large-scale structures -->
        <div class="post-box">
            <h2>Solar System</h2>
            <img src="thumbnail/Solar System.gif" alt="Solar System">
            <p>solar system is a collection of the Sun and all objects bound to it by gravity, 
            including planets, moons, asteroids, comets, and meteoroids.</p>
        </div>

        <div class="post-box">
            <h2>Star Cluster</h2>
            <img src="thumbnail/Star Cluster.gif" alt="Star Cluster">
            <p>star cluster is a group of stars that are gravitationally bound and formed from the same molecular cloud. 
            They can be open clusters (loosely packed) or globular clusters (densely packed).</p>
        </div>

        <div class="post-box">
            <h2>Galaxy</h2>
            <img src="thumbnail/Galaxy.gif" alt="Galaxy">
            <p>galaxy is a massive system of stars, gas, dust, and dark matter bound together by gravity. 
            Galaxies can be spiral, elliptical, or irregular in shape.</p>
        </div>

        <div class="post-box">
            <h2>Galaxy Cluster</h2>
            <img src="thumbnail/Galaxy Cluster.jpg" alt="Galaxy Cluster">
            <p>galaxy cluster is a group of galaxies held together by gravity. 
            They are the largest known structures in the universe.</p>
        </div>

        <div class="post-box">
            <h2>Super Cluster</h2>
            <img src="thumbnail/Super Cluster.png" alt="Super Cluster">
            <p>supercluster is a huge group of galaxy clusters bound together by gravity. 
            It is one of the largest structures in the universe.</p>
        </div>

        <div class="post-box">
            <h2 class="highlight">Brahmand / Observable Universe</h2>
            <img src="thumbnail/Observable Universe.jpg" alt="Observable Universe">
            <p>The observable universe is the part of the universe that we can see or detect from Earth,
            limited by the distance light has traveled.
</p>
        </div>

        <div class="post-box">
            <h2>Multiverse</h2>
            <img src="thumbnail/Multiverse.jpg" alt="Multiverse">
            <p>multiverse is a collection of multiple universes,
              each potentially having its own laws of physics, existing alongside our universe.</p>
        </div>
        <!-- POSTS END -->

        <button class="btn-transparent" onclick="showHome()">Close</button>
        <p></p>

    </div>
</div>

    <div id="tartam" class="page-container">
        <div class="glass-card">
            <h1>Shree Tartam Sagar</h1>			
			<a href="https://drive.google.com/file/d/1lTOvktrlNJdjFNmY6WjPM6VXrO24NnVK/view?usp=sharing" target="_blank">
             <img src="thumbnail/shree tartam sagar book.png" alt="shree tartam sagar book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1lTOvktrlNJdjFNmY6WjPM6VXrO24NnVK/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Download Book</button>
              </a>			
			<p>The <strong>Shree Tartam Sagar</strong> is the central scripture of the Nijanand Sampraday. It contains the divine speech (Vani) of sadguru shree Prannathji.</p>
            <p>It provides the knowledge of the Soul (Atma) and the Supreme Lord (Paramatma).</p>
            <p>This holy book is considered the living form of the Lord in the absence of a physical Guru.</p>
            </a>
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <div id="vitak" class="page-container">
        <div class="glass-card">
            <h1>Shree Vitak Sahib</h1>
			<a href="https://drive.google.com/file/d/1fyTtthUQIylUHAFgsUI7gy3MHH5FJSUR/view?usp=sharing" target="_blank">
             <img src="thumbnail/shree vitak sahib book.png" alt="shreee vitak sahib book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1fyTtthUQIylUHAFgsUI7gy3MHH5FJSUR/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Download Book</button>
              </a>
            <p><strong>Shree Vitak Sahib</strong> records the history of the sect, detailing the lives and journeys of Sadguru Devchandraji and Mahamati Prannathji.</p>
            <p>It describes the awakening of the soul, the struggles faced by the Sundarsath (devotees), and the establishment of the faith across world.</p>
            <p><em>"Without knowing the history (vitak), one cannot understand the depth of the spiritual journey."</em></p>
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <div id="viratpat" class="page-container">
        <div class="glass-card">
            <h1>Shree Viratpat Darshan</h1>
            <img src="thumbnail/Aksharatit purnabramha.jpg" alt="Aksharatit purnabramha">
			<img src="thumbnail/akshar bramha.jpg" alt="akshar bramha">
			<img src="thumbnail/akshar bramha chatuspad.jpg" alt="akshar bramha chatuspad">
			<img src="thumbnail/keval bramha.jpg" alt="keval bramha">
			<img src="thumbnail/ksher purush.jpg" alt="ksher purush">			
            <p>The <strong>Viratpat</strong> is the cosmological map of the universe as described in the Tartam Vani.</p>
            <p>It explains the 14 Lokas of the Kshar Purush (Perishable Universe), the Akshar Brahman (Imperishable), and the ultimate abode, the Paramdham (Eternity).</p>
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <div id="seva" class="page-container">
        <div class="glass-card">
           <h1>Seva Puja</h1>
			<a href="https://drive.google.com/file/d/1i82G250VZ71dEZBWv-Ccstnu79j_EQKD/view?usp=sharing" target="_blank">
             <img src="thumbnail/seva puja book.png" alt="seva puja book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1i82G250VZ71dEZBWv-Ccstnu79j_EQKD/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Download Book</button>
              </a>
            <p>The daily routine of worship (Ashtayam Seva) reflects pure devotion and love for Shri Raj Shyamaji.</p>  
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <div id="nitya" class="page-container">
        <div class="glass-card">
            <h1>Nitya Paath</h1>
			<a href="https://drive.google.com/file/d/1AxSK5n-WJ0erVBBpO1sC415nMLoLtgtD/view?usp=sharing" target="_blank">
             <img src="thumbnail/nitya paath book.png" alt="nitya paath book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1AxSK5n-WJ0erVBBpO1sC415nMLoLtgtD/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Download Book</button>
              </a>
            <p>Daily recitation for spiritual strength and connection.</p>
            <p>recite verses daily to keep the mind focused on the Lotus Feet of the Lord.</p>
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <div id="pushpanjali" class="page-container">
        <div class="glass-card">
            <h1>Prathana Pushpanjali</h1>
			<a href="https://drive.google.com/file/d/1NmgCkyhpR7jWHqOeGnIn6yYnyuo2vjxi/view?usp=sharing" target="_blank">
             <img src="thumbnail/prathanapushpanjali book.png" alt="prathanapushpanjali book">
			 </a>
			 <br>
             <a href="https://drive.google.com/file/d/1NmgCkyhpR7jWHqOeGnIn6yYnyuo2vjxi/view?usp=sharing" target="_blank">
              <button class="btn-transparent">Download Book</button>
              </a>
            <p>Offering the flowers of our feelings to the Lord.</p>
            <p><em>"Sundarsath Ji..."</em></p>
            <p>Prayer is not just asking, but surrendering one's ego (Haume) to the will of Shri Krishna.</p>
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <div id="contact" class="page-container">
        <div class="glass-card">
             <img src="thumbnail/ceo.png" alt="ceo">
            <h1>Contact Us</h1>
            <button class="btn-transparent" onclick="window.location.href='mailto:bramhaatma@gmail.com'">Send Email</button>
            <button class="btn-transparent" onclick="showHome()">Back</button>
        </div>
    </div>

    <script>
        // --- 1. NAVIGATION FUNCTIONS ---
        function toggleMenu() {
            document.getElementById('navOverlay').classList.toggle('active');
        }

        function showPage(pageId) {
            document.getElementById('navOverlay').classList.remove('active');
            // Hide all pages
            document.querySelectorAll('.page-container').forEach(p => p.style.display = 'none');
            // Show target
            const target = document.getElementById(pageId);
            if(target) target.style.display = 'block';
            // Hide floating elements
            document.getElementById('latest-bar').style.display = 'none';
            document.getElementById('control-tip').style.display = 'none';
        }

        function showHome() {
            document.getElementById('navOverlay').classList.remove('active');
            document.querySelectorAll('.page-container').forEach(p => p.style.display = 'none');
            // Show floating elements
            document.getElementById('latest-bar').style.display = 'block';
            document.getElementById('control-tip').style.display = 'block';
        }
		
		         function shareSite() {
        if (navigator.share) {
            navigator.share({
                title: 'Krishna Pranami',
                text: 'Discover the Cosmology of Nijanand Sampraday',
                url: window.location.href
            }).catch(console.error);
        } else {
            alert("Link copied to clipboard!");
        }
        toggleMenu();
    }


        // --- 2. D3 DATA (Your Full Hierarchy) ---
        const treeData = {
        name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§æ‡§§‡•Ä‡§§ (‡§™‡•Å‡§∞‡•ç‡§£‡§¨‡•ç‡§∞‡§Æ‡•ç‡§π)",
        children: [
            {
                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§æ‡§§‡•Ä‡§§ ‡§ï‡§æ ‡§™‡§∞‡§Æ‡§ß‡§æ‡§Æ",
                children: [
                    {
                        name: "‡§¨‡§°‡§º‡•Ä ‡§∞‡§æ‡§Ç‡§ó",
                        children: [
                            {
                                name: "‡§∏‡§æ‡§ó‡§∞ ‡§Æ‡§Ç‡§°‡§≤",
                                children: [
                                    { name: "‡§¶‡§ß‡§ø ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§ò‡•É‡§§ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§∞‡§∏ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§Æ‡§ß‡•Å ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§∏‡§∞‡•ç‡§µ‡§∞‡§∏ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§®‡•Ç‡§∞ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§®‡•Ä‡§∞ ‡§∏‡§æ‡§ó‡§∞" },
                                    { name: "‡§ï‡•ç‡§∑‡•Ä‡§∞ ‡§∏‡§æ‡§ó‡§∞" }
                                ]
                            },
                            {
                                name: "‡§ö‡§æ‡§Å‡§¶‡§®‡•Ä ‡§ö‡•å‡§ï",
                                children: [
                                    { name: "‡§Ø‡§Æ‡•Å‡§®‡§æ‡§ú‡•Ä" },
                                    { name: "‡§Ö‡§Æ‡•É‡§§ ‡§µ‡§®" },
                                    { name: "‡§™‡§æ‡§ü ‡§ò‡§æ‡§ü" },
                                    { name: "‡§¨‡§ü ‡§µ‡§®" },
                                    { name: "‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä ‡§µ‡§®" },
                                    { name: "‡§ú‡§Æ‡•ç‡§¨‡•Å ‡§µ‡§®" },
                                    { name: "‡§Ö‡§®‡§æ‡§∞ ‡§µ‡§®" },
                                    { name: "‡§≤‡§ø‡§¨‡•ã‡§à ‡§µ‡§®" },
                                    { name: "‡§ï‡•á‡§≤ ‡§µ‡§®" },
                                    { name: "‡§∞‡§Ç‡§ó ‡§Æ‡§π‡§≤" },
                                    { name: "‡§¨‡§ü ‡§™‡•Ä‡§™‡§≤ ‡§ö‡•å‡§ï‡•Ä" },
                                    { name: "‡§ñ‡§°‡•ã‡§ï‡§≤‡•Ä ‡§≤‡§æ‡§≤ ‡§ö‡§¨‡•Ç‡§§‡§∞‡§æ" },
                                    { name: "‡§§‡§æ‡§°‡§º ‡§µ‡§®" },
                                    { name: "‡§¨‡§°‡•ã ‡§µ‡§®" },
                                    { name: "‡§Æ‡§ß‡•Å ‡§µ‡§®" },
                                    { name: "‡§Æ‡§π‡§æ ‡§µ‡§®" },
                                    { name: "‡§â‡§§‡§∞ ‡§ò‡§æ‡§ü‡•Ä ‡§µ‡§®" },
                                    { name: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú‡§ó‡§ø‡§∞‡•Ä ‡§Æ‡§π‡§≤" },
                                    { name: "‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ ‡§ò‡§æ‡§ü‡•Ä ‡§µ‡§®" },
                                    { name: "‡§ö‡•ã‡§ó‡§æ‡§®" },
                                    { name: "‡§Ö‡§®‡•ç‡§® ‡§ß‡§®" },
                                    { name: "‡§¶‡•Ç‡§ß ‡§¶‡§≤‡•Ä‡§ö‡§æ" },
                                    { name: "‡§´‡•Å‡§≤ ‡§¨‡§æ‡§ó" },
                                    { name: "‡§®‡•Ç‡§∞ ‡§¨‡§æ‡§ó" },
                                    { name: "‡§π‡•ã‡§ú‡§ï‡•ã‡§∂‡§∞ ‡§§‡§æ‡§≤ (‡§∏‡•Å‡§ß‡§æ‡§∏‡§∞)" },
                                    { name: "‡§Æ‡§æ‡§£‡§ø‡§ï ‡§Æ‡§π‡§≤" }
                                ]
                            },
                            {
                                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ß‡§æ‡§Æ",
                                children: [
                                    { name: "‡§ï‡•Å‡§Ç‡§ú ‡§®‡§ø‡§ï‡•Å‡§Ç‡§ú" },
                                    { name: "‡§¨‡§ü ‡§µ‡§®" },
                                    { name: "‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä ‡§µ‡§®" },
                                    { name: "‡§ú‡§Æ‡•ç‡§¨‡•Å ‡§µ‡§®" },
                                    { name: "‡§Ö‡§®‡§æ‡§∞ ‡§µ‡§®" },
                                    { name: "‡§≤‡§ø‡§¨‡•ã‡§à ‡§µ‡§®" },
                                    { name: "‡§ï‡•á‡§≤ ‡§µ‡§®" },
                                    { name: "‡§Ö‡§Æ‡•É‡§§" }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ (‡§∏‡§§‡•ç‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™)",
                children: [
                    {
                        name: "‡§Æ‡§π‡§æ‡§ï‡§æ‡§∞‡§£",
                        children: [
                            {
                                name: "‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ ‡§®‡§ó‡•ç‡§® ‡§∏‡§§‡•ç‡§Ø (‡§Ö‡§µ‡•ç‡§Ø‡§æ‡§ï‡•É‡§§)",
                                children: [
                                    { name: "‡§ú‡•ã‡§∂ ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™" },
                                    { name: "‡§¨‡•Å‡§¶‡•ç‡§ß ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™" }
                                ]
                            }
                        ]
                    },
                    { name: "‡§∏‡§§‡•ç‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™" },
                    { name: "‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§®‡•Ä" }
                ]
            },
            {
                name: "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ (‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø‚Äì‡§™‡•Å‡§∞‡•Å‡§∑)",
                children: [
                    { name: "‡§ó‡•ã‡§≤‡•ã‡§ï ‡§ß‡§æ‡§Æ" },
                    {
                        name: "‡§®‡§ø‡§§‡•ç‡§Ø ‡§¨‡•à‡§ï‡•Å‡§Ç‡§†",
                        children: [
                            { name: "‡§∏‡§§‡•ç‡§Ø ‡§≤‡•ã‡§ï" },
                            { name: "‡§µ‡§ø‡§∑‡•ç‡§£‡•Å ‡§≤‡•ã‡§ï" },
                            { name: "‡§™‡•Å‡§∑‡•ç‡§ï‡§∞ ‡§¶‡•ç‡§µ‡•Ä‡§™" },
                            { name: "‡§∂‡•ç‡§µ‡•á‡§§ ‡§¶‡•ç‡§µ‡•Ä‡§™" }
                        ]
                    },
                    { name: "‡§Ü‡§µ‡§∞‡§£ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                    { name: "‡§µ‡§ø‡§ï‡•ç‡§∑‡•á‡§™ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                    {
                        name: "‡§∏‡•Å‡§Æ‡§Ç‡§ó‡§≤‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø (‡§ö‡§ø‡§¶‡§æ‡§®‡§Ç‡§¶ ‡§≤‡§π‡§∞‡•Ä)",
                        children: [
                            { name: "‡§Æ‡§π‡§æ‡§µ‡§ø‡§∑‡•ç‡§£‡•Å" },
                            { name: "‡§∂‡§ø‡§µ" },
                            { name: "‡§∏‡§®‡§ï‡§æ‡§¶‡§ø‡§ï" },
                            { name: "‡§∏‡•Å‡§ï‡§¶‡•á‡§µ" },
                            { name: "‡§ï‡§¨‡•Ä‡§∞" }
                        ]
                    }
                ]
            },
            {
                name: "‡§Ö‡§µ‡•ç‡§Ø‡§æ‡§ï‡•É‡§§ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                children: [
                    {
                        name: "‡§ï‡§æ‡§∞‡§£",
                        children: [
                            { name: "‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§Ö‡§®‡§ø‡§∞‡•ç‡§µ‡§ö‡§®‡•Ä‡§Ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§â‡§®‡§Æ‡•Å‡§®‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§á‡§ö‡•ç‡§õ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§§‡•É‡§ö‡•ç‡§õ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§∂‡§ø‡§µ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                            { name: "‡§∏‡§æ‡§§ ‡§∂‡•Ç‡§®‡•ç‡§Ø" },
                            { name: "‡§∏‡§æ‡§§ ‡§∞‡§Ç‡§ó" }
                        ]
                    },
                    {
                        name: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ",
                        children: [
                            { name: "‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ" },
                            { name: "‡§Ö‡§ß‡§ø‡§¶‡•à‡§µ" },
                            { name: "‡§Ö‡§ß‡§ø‡§≠‡•Ç‡§§" }
                        ]
                    },
                    {
                        name: "‡§∏‡•ç‡§•‡•Ç‡§≤",
                        children: [
                            {
                                name: "‡§™‡§∞‡§™‡•ç‡§∞‡§£‡§µ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                                children: [
                                    { name: "‡§ú‡•ç‡§û‡§æ‡§® ‡§∂‡§ï‡•ç‡§§‡§ø ‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä" },
                                    { name: "‡§™‡§æ‡§Å‡§ö ‡§µ‡•á‡§¶" }
                                ]
                            },
                            {
                                name: "‡§Ö‡§™‡§∞ ‡§™‡§∞‡§™‡•ç‡§∞‡§£‡§µ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                                children: [
                                    { name: "‡•ê" }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                name: "‡§ï‡•á‡§µ‡§≤ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                children: [
                    { name: "‡§ï‡•á‡§µ‡§≤ ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ" },
                    { name: "‡§Ü‡§®‡§Ç‡§¶ ‡§Ø‡•ã‡§ó‡§Æ‡§æ‡§Ø‡§æ" },
                    { name: "‡§π‡§ø‡§Ç‡§°‡•ã‡§≤‡§æ ‡§Ø‡•ã‡§ó‡§Æ‡§æ‡§Ø‡§æ ‡§Æ‡§Ç‡§°‡§≤" }
                ]
            },
            {
                name: "‡§∏‡§¨‡§≤‡•Ä‡§ï ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ",
                children: [
                    { name: "‡§∏‡§¨‡§≤‡•Ä‡§ï ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ ‡§ï‡§æ ‡§Æ‡§π‡§æ‡§ï‡§æ‡§∞‡§£" },
                    { name: "‡§Ö‡§ñ‡§Ç‡§° ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∏" },
                    { name: "‡§®‡§ø‡§§‡•ç‡§Ø ‡§ó‡•ã‡§≤‡•ã‡§ï" }
                ]
            },
            {
                name: "‡§ï‡•ç‡§∑‡§∞ ‡§™‡•Å‡§∞‡•Å‡§∑",
                children: [
                    {
                        name: "‡§Æ‡•ã‡§π ‡§ú‡§≤",
                        children: [
                            {
                                name: "‡§Ü‡§¶‡§ø ‡§®‡§æ‡§∞‡§æ‡§Ø‡§£ (‡§ö‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡•Ç‡§π)",
                                children: [
                                    { name: "‡§µ‡§æ‡§∏‡•Å‡§¶‡•á‡§µ" },
                                    { name: "‡§∏‡§Ç‡§ï‡§∞‡•ç‡§∑‡§£" },
                                    { name: "‡§™‡•ç‡§∞‡§¶‡•ç‡§Ø‡•Å‡§Æ‡•ç‡§®" },
                                    { name: "‡§Ö‡§®‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß" }
                                ]
                            },
                            {
                                name: "‡§Æ‡§π‡§æ‡§µ‡§ø‡§∑‡•ç‡§£‡•Å",
                                children: [
                                    {
                                        name: "‡§ï‡§æ‡§∞‡§£ ‡§∂‡§∞‡•Ä‡§∞",
                                        children: [
                                            { name: "‡§â‡§®‡§Æ‡•Å‡§®‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§Ö‡§®‡§ø‡§∞‡•ç‡§µ‡§ö‡§®‡•Ä‡§Ø ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§§‡•É‡§ö‡•ç‡§õ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§∂‡§ø‡§µ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§∏‡§æ‡§§ ‡§∂‡•Ç‡§®‡•ç‡§Ø" }
                                        ]
                                    },
                                    {
                                        name: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§∂‡§∞‡•Ä‡§∞",
                                        children: [
                                            { name: "‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§Æ‡§π‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                            { name: "‡§∏‡•Å‡§Æ‡§®‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" }
                                        ]
                                    },
                                    {
                                        name: "‡§∏‡•ç‡§•‡•Ç‡§≤ ‡§∂‡§∞‡•Ä‡§∞",
                                        children: [
                                            { name: "‡§ú‡•ç‡§û‡§æ‡§® ‡§∂‡§ï‡•ç‡§§‡§ø ‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä" },
                                            { name: "‡§ö‡§æ‡§∞ ‡§µ‡•á‡§¶" }
                                        ]
                                    }
                                ]
                            },
                            {
                                name: "‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™ (‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä)",
                                children: [
                                    { name: "‡§ö‡§Æ‡•ã‡§ö‡§ï ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§á‡§ß‡•Ä‡§¶‡•ç‡§µ‡•Ä‡§™‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§™‡§∞‡§Æ‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" },
                                    { name: "‡§â‡§ß‡•ç‡§¶‡•ç‡§∞‡§ó‡§æ ‡§∂‡§ï‡•ç‡§§‡§ø" }
                                ]
                            },
                            {
                                name: "‡§Ö‡§∑‡•ç‡§ü ‡§Ü‡§µ‡§∞‡§£ (‡§®‡§ø‡§§‡•ç‡§Ø ‡§™‡•ç‡§∞‡§≤‡§Ø)",
                                children: [
                                    {
                                        name: "‡§™‡§Ç‡§ö‡§Æ‡§π‡§æ‡§≠‡•Ç‡§§",
                                        children: [
                                            { name: "‡§™‡•É‡§•‡•ç‡§µ‡•Ä" },
                                            { name: "‡§ú‡§≤" },
                                            { name: "‡§Ö‡§ó‡•ç‡§®‡§ø" },
                                            { name: "‡§µ‡§æ‡§Ø‡•Å" },
                                            { name: "‡§Ü‡§ï‡§æ‡§∂" }
                                        ]
                                    },
                                    {
                                        name: "‡§Ö‡§Ç‡§§‡§É‡§ï‡§∞‡§£",
                                        children: [
                                            { name: "‡§Æ‡§®" },
                                            { name: "‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø" },
                                            { name: "‡§Ö‡§π‡§Ç‡§ï‡§æ‡§∞" }
                                        ]
                                    }
                                ]
                            },
                            {
                                name: "‡§≤‡•ã‡§ï (‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°)",
                                children: [
                                    { name: "‡§∏‡§§‡•ç‡§Ø‡§≤‡•ã‡§ï" },
                                    { name: "‡§§‡§™‡§≤‡•ã‡§ï" },
                                    { name: "‡§ú‡§®‡§≤‡•ã‡§ï" },
                                    { name: "‡§Æ‡§π‡§∞‡§≤‡•ã‡§ï" },
                                    { name: "‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó‡§≤‡•ã‡§ï" },
                                    { name: "‡§≠‡•Å‡§µ‡§∞‡•ç‡§≤‡•ã‡§ï" },
                                    { name: "‡§≠‡•Ç‡§≤‡•ã‡§ï (‡§™‡•É‡§•‡•ç‡§µ‡•Ä)" },
                                    { name: "‡§Ö‡§§‡§≤" },
                                    { name: "‡§µ‡§ø‡§§‡§≤" },
                                    { name: "‡§∏‡•Å‡§§‡§≤" },
                                    { name: "‡§§‡§≤‡§æ‡§§‡§≤" },
                                    { name: "‡§Æ‡§π‡§æ‡§§‡§≤" },
                                    { name: "‡§∞‡§∏‡§æ‡§§‡§≤" },
                                    { name: "‡§™‡§æ‡§§‡§æ‡§≤" },
                                    { name: "‡§∂‡•á‡§∑‡§∂‡§æ‡§Ø‡•Ä ‡§®‡§æ‡§∞‡§æ‡§Ø‡§£" }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    };

// --- 3. D3 RENDER LOGIC ---

const width = window.innerWidth;
const height = window.innerHeight;

const svg = d3.select("#chart-container")
    .append("svg")
    .attr("width", "100%")
    .attr("height", "100vh");

const g = svg.append("g");

// ---------------- ZOOM ----------------
const zoom = d3.zoom()
    .scaleExtent([0.1, 4])
    .on("zoom", (e) => g.attr("transform", e.transform));

svg.call(zoom);

// ---------------- TREE ----------------
const tree = d3.tree().nodeSize([45, 280]);
const root = d3.hierarchy(treeData);

// ---------------- COLLAPSE ALL ----------------
function collapseFull(d) {
    if (d.children) {
        d._children = d.children;
        d._children.forEach(collapseFull);
        d.children = null;
    }
}
collapseFull(root);

// initial position
root.x0 = 0;
root.y0 = 0;

// ---------------- CENTER UTILS ----------------
function getCenter() {
    return {
        x: height / 2,
        y: document.getElementById("chart-container").clientWidth / 2
    };
}

function centerPoint(x, y, scale = 0.7) {
    const c = getCenter();

    const t = d3.zoomIdentity
        .translate(
            c.y - y * scale,
            c.x - x * scale
        )
        .scale(scale);

    svg.transition()
        .duration(600)
        .call(zoom.transform, t);
}

// ‚≠ê focus newly opened nodes
function focusNewNodes(parent) {
    if (!parent.children || parent.children.length === 0) {
        centerPoint(parent.x, parent.y);
        return;
    }

    let sumX = 0;
    let sumY = 0;

    parent.children.forEach(c => {
        sumX += c.x;
        sumY += c.y;
    });

    const cx = sumX / parent.children.length;
    const cy = sumY / parent.children.length;

    centerPoint(cx, cy);
}

// ---------------- UPDATE ----------------
let i = 0;

function update(source) {

    const nodes = tree(root).descendants();
    const links = tree(root).links();

    nodes.forEach(d => d.y = d.depth * 280);

    // ---------------- NODES ----------------
    const node = g.selectAll("g.node")
        .data(nodes, d => d.id || (d.id = ++i));

    const nodeEnter = node.enter()
        .append("g")
        .attr("class", "node")
        .attr("transform", `translate(${source.y0},${source.x0})`)
        .on("click", (event, d) => {

            const hadChildren = !!d.children;

            if (d.children) {
                d._children = d.children;
                d.children = null;
            } else {
                d.children = d._children;
                d._children = null;
            }

            update(d);

            // üß† wait for layout, then focus
            requestAnimationFrame(() => {
                if (!hadChildren) {
                    // expand ‚Üí focus on new nodes
                    focusNewNodes(d);
                } else {
                    // collapse ‚Üí focus back on parent
                    centerPoint(d.x, d.y);
                }
            });
        });

    nodeEnter.append("circle")
        .attr("r", 1e-6)
        .style("fill", d => d._children ? "var(--highlight)" : "#000");

    nodeEnter.append("text")
        .attr("dy", ".35em")
        .attr("x", d => d.children || d._children ? -18 : 18)
        .attr("text-anchor", d => d.children || d._children ? "end" : "start")
        .text(d => d.data.name);

    const nodeUpdate = nodeEnter.merge(node);

    nodeUpdate.transition()
        .duration(500)
        .attr("transform", d => `translate(${d.y},${d.x})`);

    nodeUpdate.select("circle")
        .attr("r", 8)
        .style("fill", d => d._children ? "var(--highlight)" : "#000");

    node.exit()
        .transition()
        .duration(500)
        .attr("transform", `translate(${source.y},${source.x})`)
        .remove();

    // ---------------- LINKS ----------------
    const link = g.selectAll("path.link")
        .data(links, d => d.target.id);

    const linkEnter = link.enter()
        .insert("path", "g")
        .attr("class", "link")
        .attr("d", () => diagonal(
            { x: source.x0, y: source.y0 },
            { x: source.x0, y: source.y0 }
        ));

    linkEnter.merge(link)
        .transition()
        .duration(500)
        .attr("d", d => diagonal(d.source, d.target));

    link.exit()
        .transition()
        .duration(500)
        .attr("d", () => diagonal(
            { x: source.x, y: source.y },
            { x: source.x, y: source.y }
        ))
        .remove();

    nodes.forEach(d => {
        d.x0 = d.x;
        d.y0 = d.y;
    });
}

// ---------------- DIAGONAL ----------------
function diagonal(s, d) {
    return `
        M ${s.y} ${s.x}
        C ${(s.y + d.y) / 2} ${s.x},
          ${(s.y + d.y) / 2} ${d.x},
          ${d.y} ${d.x}
    `;
}

// ---------------- INITIAL ----------------
update(root);
centerPoint(root.x, root.y);


	function toggleMenu() { document.getElementById('navOverlay').classList.toggle('active'); }
    function showHome() { 
        document.querySelectorAll('.page-container').forEach(p => p.style.display = 'none');
        document.getElementById('navOverlay').classList.remove('active');
        document.getElementById('latest-bar').style.display = 'block';
        document.getElementById('control-tip').style.display = 'block';
    }
    function showPage(id) {
        if(document.getElementById('navOverlay').classList.contains('active')) toggleMenu();
        document.querySelectorAll('.page-container').forEach(p => p.style.display = 'none');
        document.getElementById(id).style.display = 'block';
        document.getElementById('latest-bar').style.display = 'none';
        document.getElementById('control-tip').style.display = 'none';
    }
	function goLatest() {
    window.location.href = "#latest";
}
    </script>
</body>
</html>
